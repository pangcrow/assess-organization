(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{164:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},174:function(e,t,a){e.exports=a(397)},189:function(e,t,a){},216:function(e,t,a){},392:function(e,t,a){},395:function(e,t,a){},397:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(9),l=a.n(r),c=a(33),i=a(34),s=a(37),d=a(35),u=a(38),m=(a(398),a(49)),h=(a(79),a(10)),f=(a(186),a(70)),p=a(164),g=a.n(p),E=(a(189),a(402)),y=a(400),b=a(401),S=(a(99),a(60)),v=(a(124),a(69)),C=(a(80),a(45)),w=(a(100),a(58)),k=a(25),x=(a(51),a(11)),O=(a(72),a(48)),j=a(67),I=a.n(j),F=(a(216),a(57)),T=a.n(F),D=a(28),N=a.n(D),P="http://localhost:9096/platform/public/index.php",R="".concat(P,"/organization/assessors"),z="".concat(P,"/organization/translate"),A="".concat(P,"/organization/recommend"),L=function(){return N.a.get("".concat(z,"/all"))},W=function(e){return N.a.post("".concat(z,"/finish"),e)},M=function(e){return N.a.post("".concat(z,"/upload"),e,{headers:{"Content-Type":"multipart/form-data"}})},K=function(e){var t=document.createElement("form");t.action="".concat(z,"/download"),t.method="post",t.style.display="none";var a=document.createElement("input");return a.type="text",a.name="articleid",a.value=e,t.appendChild(a),document.body.appendChild(t),t.submit(),t},B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).componentWillMount=function(){L().then(function(e){a.setState({data:e.data,loading:!1})}).catch(function(e){return console.log(e)})},a.getColumnSearchProps=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,r=t.selectedKeys,l=t.confirm,c=t.clearFilters;return o.a.createElement("div",{className:"custom-filter-dropdown"},o.a.createElement(O.a,{ref:function(e){a.searchInput=e},placeholder:"Search ".concat(e),value:r[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return a.handleSearch(r,l)},style:{width:188,marginBottom:8,display:"block"}}),o.a.createElement(x.a,{type:"primary",onClick:function(){return a.handleSearch(r,l)},icon:"search",size:"small",style:{width:90,marginRight:8}},"Search"),o.a.createElement(x.a,{onClick:function(){return a.handleReset(c)},size:"small",style:{width:90}},"Reset"))},filterIcon:function(e){return o.a.createElement(h.a,{type:"search",style:{color:e?"#1890ff":void 0}})},onFilter:function(t,a){return a[e].toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout(function(){return a.searchInput.select()})},render:function(e){return o.a.createElement(I.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a.state.searchText],autoEscape:!0,textToHighlight:e})}}},a.handleSearch=function(e,t){t(),a.setState({searchText:e[0]})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.handleUpload=function(e,t,n){var o=new FormData;o.append("file",n.target.files[0]),o.append("articleid",e.articleid),o?M(o).then(function(e){var n=a.state.data;n[t].finishtime=e.data,a.setState({data:n}),console.log(e)}).catch(function(e){return console.log(e)}):console.log("\u6728\u6709")},a.handleDownload=function(e){K(e.articleid)},a.handleFinish=function(){var e=a.state.record,t=a.state.index;W(T.a.stringify({articleid:e.articleid})).then(function(e){var n=a.state.data;n[t].status="\u5b8c\u6210",a.setState({data:n}),console.log(e.data)}).catch(function(e){return console.log(e)})},a.showModal=function(e,t){a.setState({visible:!0,record:e,index:t})},a.handleOk=function(){a.setState({visible:!1}),a.handleFinish()},a.handleCancel=function(){a.setState({visible:!1})},a.state={loading:!0,data:[],visible:!1,record:"",index:""},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=[Object(k.a)({title:"Author",dataIndex:"author",key:"author",width:"15%"},this.getColumnSearchProps("author")),Object(k.a)({title:"Type",dataIndex:"type",key:"type",width:"15%"},this.getColumnSearchProps("type")),Object(k.a)({title:"UploadTime",dataIndex:"uploadtime",key:"uploadtime",width:"20%"},this.getColumnSearchProps("uploadtime")),Object(k.a)({title:"LastTime",dataIndex:"finishtime",key:"finishtime",width:"20%"},this.getColumnSearchProps("finishtime")),{title:"Status",dataIndex:"status",key:"status",width:"10%",sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"Action",key:"articleid",render:function(t,a,r){return o.a.createElement(n.Fragment,null,o.a.createElement("a",null,o.a.createElement("input",{type:"file",className:"file",encType:"multipart/form-data",onChange:function(t){return e.handleUpload(a,r,t)}}),"\u4e0a\u4f20"),o.a.createElement(w.a,{type:"vertical"}),o.a.createElement("a",{onClick:function(){return e.handleDownload(a)}},"\u4e0b\u8f7d"),o.a.createElement(w.a,{type:"vertical"}),o.a.createElement("a",{onClick:function(){return e.showModal(a,r)}},"\u5b8c\u6210"))}}];return o.a.createElement("div",{className:"loading-baba"},!0===this.state.loading?o.a.createElement(C.a,{className:"loading",size:"large"}):o.a.createElement("div",null,o.a.createElement(v.a,{columns:t,dataSource:this.state.data}),o.a.createElement(S.a,{title:"\u8b66\u544a",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},o.a.createElement("p",null,"\u786e\u5b9a\u5b8c\u6210",o.a.createElement("font",{color:"#1890FF"},this.state.record.author),"\u540c\u5b66\u7684",o.a.createElement("font",{color:"#1890FF"},this.state.record.type),"\u7ffb\u8bd1\u5417\uff1f"))))}}]),t}(n.Component),H=a(41),U=function(e){return N.a.post("".concat(R,"/saveComment"),e)},G=function(e){var t=document.createElement("form");t.action="".concat(R,"/download"),t.method="post",t.style.display="none";var a=document.createElement("input");return a.type="text",a.name="assessid",a.value=e,t.appendChild(a),document.body.appendChild(t),t.submit(),t},V=function(e){function t(e){var a,n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(d.a)(t).call(this,e))).getColumnSearchProps=function(e){return{filterDropdown:function(t){var a=t.setSelectedKeys,r=t.selectedKeys,l=t.confirm,c=t.clearFilters;return o.a.createElement("div",{className:"custom-filter-dropdown"},o.a.createElement(O.a,{ref:function(e){n.searchInput=e},placeholder:"Search ".concat(e),value:r[0],onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:function(){return n.handleSearch(r,l)},style:{width:188,marginBottom:8,display:"block"}}),o.a.createElement(x.a,{type:"primary",onClick:function(){return n.handleSearch(r,l)},icon:"search",size:"small",style:{width:90,marginRight:8}},"Search"),o.a.createElement(x.a,{onClick:function(){return n.handleReset(c)},size:"small",style:{width:90}},"Reset"))},filterIcon:function(e){return o.a.createElement(h.a,{type:"search",style:{color:e?"#1890ff":void 0}})},onFilter:function(t,a){return a[e].toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout(function(){return n.searchInput.select()})},render:function(e){return o.a.createElement(I.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[n.state.searchText],autoEscape:!0,textToHighlight:e})}}},n.handleSearch=function(e,t){t(),n.setState({searchText:e[0]})},n.handleReset=function(e){e(),n.setState({searchText:""})},n.handleDownload=function(e){G(e.assessid)},n.showModal=function(e,t){"\u5df2\u8bc4\u4f30"!=n.state.data[t].status?n.setState({grade:n.state.data[t].grade,comment:n.state.data[t].comment,handlekey:e.assessid,visible:!0,handleindex:t}):S.a.info({title:"\u5df2\u8bc4\u4f30\uff0c\u65e0\u6cd5\u4fee\u6539\uff01"})},n.handleSave=function(e){e?n.setState({loading:!0}):n.setState({saveLoading:!0});var t=n.state.grade,a=n.state.comment,o=n.state.handlekey;U(T.a.stringify({assessid:o,grade:t,comment:a,status:e})).then(function(o){if("success"==o.data){var r=n.state.handleindex,l=n.state.data;l[r].comment=a,l[r].grade=t,"\u5df2\u8bc4\u4f30"==e&&(l[r].status="\u5df2\u8bc4\u4f30"),n.setState({data:l}),e?n.setState({loading:!1,visible:!1}):n.setState({saveLoading:!1,visible:!1})}}).catch(function(e){return console.log(e)})},n.handleCancel=function(){n.setState({visible:!1})},n.handleGrade=function(e){n.setState({grade:e.target.value})},n.handleComment=function(e){n.setState({comment:e.target.value})},n.state=(a={loading:!0,data:[]},Object(H.a)(a,"loading",!1),Object(H.a)(a,"saveLoading",!1),Object(H.a)(a,"visible",!1),Object(H.a)(a,"grade",""),Object(H.a)(a,"comment",""),Object(H.a)(a,"handlekey",""),Object(H.a)(a,"handleindex",""),a),n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this;N.a.get("".concat(R,"/all")).then(function(t){return e.setState({data:t.data,loading:!1})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this,t=[Object(k.a)({title:"Name",dataIndex:"name",key:"name",with:"10%"},this.getColumnSearchProps("name")),Object(k.a)({title:"Phone",dataIndex:"phone",key:"phone",with:"15%"},this.getColumnSearchProps("phone")),Object(k.a)({title:"CurrentSchool",dataIndex:"currschool",key:"currschool",with:"15%"},this.getColumnSearchProps("currschool")),Object(k.a)({title:"UploadTime",dataIndex:"uploadtime",key:"uploadtime",with:"20%"},this.getColumnSearchProps("uploadtime")),{title:"Grade",dataIndex:"grade",key:"grade",with:"10%"},{title:"Status",dataIndex:"status",key:"status",with:"15%",sorter:function(e,t){return e.status.localeCompare(t.status)}},{title:"Action",key:"action",with:"15%",render:function(t,a,n){return o.a.createElement("span",null,o.a.createElement("a",{onClick:function(){return e.handleDownload(a)}},"\u4e0b\u8f7d"),o.a.createElement(w.a,{type:"vertical"}),o.a.createElement("a",{onClick:function(){return e.showModal(a,n)}},"\u8bc4\u4f30"))}}],a=this.state,n=a.visible,r=a.loading,l=a.saveLoading;return o.a.createElement("div",{className:"loading-baba"},!0===this.state.loading?o.a.createElement(C.a,{className:"loading",size:"large"}):o.a.createElement("div",{className:"assess"},o.a.createElement(v.a,{columns:t,expandedRowRender:function(e){return e.comment?o.a.createElement("p",{style:{margin:0}},"Comment\uff1a",e.comment):""},dataSource:this.state.data}),o.a.createElement(S.a,{visible:n,title:"Assess",onOk:this.handleOk,onCancel:this.handleCancel,footer:[o.a.createElement(x.a,{key:"save",loading:l,onClick:function(){return e.handleSave()}},"Save"),o.a.createElement(x.a,{key:"back",onClick:this.handleCancel},"Cancel"),o.a.createElement(x.a,{key:"submit",type:"primary",loading:r,onClick:function(){return e.handleSave("\u5df2\u8bc4\u4f30")}},"Submit")]},o.a.createElement(O.a,{placeholder:"Please enter a grade",className:"grade",onChange:this.handleGrade,value:this.state.grade}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(O.a.TextArea,{rows:6,placeholder:"Please enter a comment",className:"comment",onChange:this.handleComment,value:this.state.comment}))))}}]),t}(n.Component),J=(a(383),a(128)),$=(a(386),a(127)),q=(a(389),a(172)),Q=function(e){return N.a.post("".concat(A,"/addSchool"),e)},X=function(e){return N.a.post("".concat(A,"/recommend"),e)},Y=(a(392),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).getColumnSearchProps=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,r=t.selectedKeys,l=t.confirm,c=t.clearFilters;return o.a.createElement("div",{className:"custom-filter-dropdown"},o.a.createElement(O.a,{ref:function(e){a.searchInput=e},placeholder:"Search ".concat(e),value:r[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return a.handleSearch(r,l)},style:{width:188,marginBottom:8,display:"block"}}),o.a.createElement(x.a,{type:"primary",onClick:function(){return a.handleSearch(r,l)},icon:"search",size:"small",style:{width:90,marginRight:8}},"Search"),o.a.createElement(x.a,{onClick:function(){return a.handleReset(c)},size:"small",style:{width:90}},"Reset"))},filterIcon:function(e){return o.a.createElement(h.a,{type:"search",style:{color:e?"#1890ff":void 0}})},onFilter:function(t,a){return a[e].toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout(function(){return a.searchInput.select()})},render:function(e){return o.a.createElement(I.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a.state.searchText],autoEscape:!0,textToHighlight:e})}}},a.handleSearch=function(e,t){t(),a.setState({searchText:e[0]})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.showDrawer=function(e){a.setState({visible:!0,currindex:e})},a.onClose=function(){a.setState({visible:!1,first:"First School",second:"Second School",currindex:""})},a.showChildrenDrawer=function(e){a.setState({childrenDrawer:!0,schoolnumber:e})},a.onChildrenDrawerClose=function(){a.setState({childrenDrawer:!1})},a.handleAddSchool=function(e){console.log(e),console.log(a.state.schoolnumber),"\u672a\u63a8\u8350"===a.state.schoolnumber?a.setState({first:a.state.school[e].name}):a.setState({second:a.state.school[e].name})},a.handleSubmit=function(){var e=a.state.currindex;Q(T.a.stringify({first:"First School"!==a.state.first?a.state.first:null,second:"Second School"!==a.state.second?a.state.second:null,assessid:a.state.data[e].assessid})).then(function(e){var t=a.state.data,n=a.state.currindex;"First School"!==a.state.first&&(t[n].first=a.state.first),"Second School"!==a.state.second&&(t[n].second=a.state.second),a.setState({data:t}),a.onClose()}).catch(function(e){return console.log(e)})},a.showConfirm=function(e){a.setState({modal:!0,currindex:e,modalName:a.state.data[e].name,modalRecommend:a.state.data[e].recommend})},a.handleOk=function(){a.setState({modal:!1});var e=a.state.data[a.state.currindex].assessid;X(T.a.stringify({assessid:e})).then(function(e){console.log(e.data);var t=a.state.data;t[a.state.currindex].needrecommend="\u5df2\u63a8\u8350",a.setState({data:t})}).catch(function(e){console.log(e)})},a.handleCancel=function(){a.setState({modal:!1})},a.state={loading:!0,data:[],school:[],visible:!1,childrenDrawer:!1,schoolnumber:"",first:"First School",second:"Second School",currindex:"",modal:"",modalName:"",modalRecommend:""},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this;N.a.get("".concat(A,"/selectneed")).then(function(t){return e.setState({data:t.data,loading:!1})}).catch(function(e){return console.log(e)})}},{key:"componentDidMount",value:function(){var e=this;N.a.get("".concat(A,"/school")).then(function(t){e.setState({school:t.data})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this,t=function(){q.a.info("\u8be5\u5b66\u751f\u5df2\u63a8\u8350\uff01")},a=[Object(k.a)({title:"Name",dataIndex:"name",key:"name",with:"10%"},this.getColumnSearchProps("name")),Object(k.a)({title:"Phone",dataIndex:"phone",key:"phone",with:"10%"},this.getColumnSearchProps("phone")),Object(k.a)({title:"CurrentSchool",dataIndex:"currschool",key:"currschool",with:"10%"},this.getColumnSearchProps("currschool")),{title:"FirstSchool",dataIndex:"first",key:"first",with:"15%"},{title:"SecondSchool",dataIndex:"second",key:"second",with:"15%"},{title:"ConfirmSchool",dataIndex:"recommend",key:"recommend",with:"15%"},{title:"Status",dataIndex:"needrecommend",key:"needrecommend",with:"10%",sorter:function(e,t){return e.needrecommend.localeCompare(t.needrecommend)}},{title:"Action",key:"action",render:function(a,n,r){return o.a.createElement("span",null,"\u5df2\u63a8\u8350"===e.state.data[r].needrecommend?o.a.createElement("a",{onClick:t},"\u9009\u62e9\u9662\u6821"):o.a.createElement("a",{onClick:function(){return e.showDrawer(r)}},"\u9009\u62e9\u9662\u6821"),o.a.createElement(w.a,{type:"vertical"}),"\u5df2\u63a8\u8350"===e.state.data[r].needrecommend?o.a.createElement("a",{onClick:t},"\u786e\u8ba4\u63a8\u8350"):o.a.createElement("a",{onClick:function(){return e.showConfirm(r)}},"\u786e\u8ba4\u63a8\u8350"))}}];return o.a.createElement("div",{className:"loading-baba"},!0===this.state.loading?o.a.createElement(C.a,{className:"loading",size:"large"}):o.a.createElement("div",{className:"assess"},o.a.createElement(v.a,{columns:a,dataSource:this.state.data}),o.a.createElement(J.a,{title:"\u9662\u6821\u63a8\u8350",width:520,closable:!1,onClose:this.onClose,visible:this.state.visible},o.a.createElement(x.a,{type:"default",onClick:function(){return e.showChildrenDrawer("\u672a\u63a8\u8350")},style:{minWidth:"180px"}},this.state.first),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(x.a,{type:"default",onClick:function(){return e.showChildrenDrawer("\u5df2\u63a8\u8350")},style:{minWidth:"180px"}},this.state.second),o.a.createElement(J.a,{title:"\u9662\u6821\u9009\u62e9",width:400,closable:!1,onClose:this.onChildrenDrawerClose,visible:this.state.childrenDrawer},o.a.createElement($.a,{accordion:!0,bordered:!1},this.state.school.map(function(t,a){return o.a.createElement($.a.Panel,{header:t.name,key:a},"Ranking : ",t.ranking,o.a.createElement("br",null),"Address : ",t.country," ",t.address,o.a.createElement("br",null),"Tuition : ",t.tuition,o.a.createElement("br",null),"Remark : ",t.remark,o.a.createElement("br",null),o.a.createElement("div",{style:{width:"100%",textAlign:"right"}},o.a.createElement(x.a,{shape:"circle",icon:"plus",size:"small",onClick:function(){return e.handleAddSchool(a)}})))}))),o.a.createElement("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},o.a.createElement(x.a,{style:{marginRight:8},onClick:this.onClose},"Cancel"),o.a.createElement(x.a,{onClick:this.handleSubmit,type:"primary"},"Submit"))),o.a.createElement(S.a,{title:"\u8b66\u544a",visible:this.state.modal,onOk:this.handleOk,onCancel:this.handleCancel},o.a.createElement("p",null,"\u786e\u5b9a\u63a8\u8350",o.a.createElement("font",{color:"#1890FF"},this.state.modalName),"\u8be5\u5230",o.a.createElement("font",{color:"#1890FF"},this.state.modalRecommend),"\u5417\uff1f"))))}}]),t}(n.Component)),Z=f.a.Header,_=f.a.Sider,ee=f.a.Content,te=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).toggle=function(){a.setState({collapsed:!a.state.collapsed})},a.state={collapsed:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement(E.a,null,o.a.createElement(f.a,null,o.a.createElement(_,{trigger:null,collapsible:!0,collapsed:this.state.collapsed,className:"sider"},o.a.createElement("div",{id:"title"},o.a.createElement("img",{src:g.a,className:"App-logo",alt:"logo"}),this.state.collapsed?"":o.a.createElement("h2",{id:"title-name"},"\u8bc4\u4f30\u673a\u6784")),o.a.createElement(m.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"]},o.a.createElement(m.a.Item,{key:"1"},o.a.createElement(y.a,{to:"/"},o.a.createElement(h.a,{type:"read"}),o.a.createElement("span",null,"\u7ffb\u8bd1\u670d\u52a1"))),o.a.createElement(m.a.Item,{key:"2"},o.a.createElement(y.a,{to:"/assess"},o.a.createElement(h.a,{type:"solution"}),o.a.createElement("span",null,"\u8bc4\u4f30\u670d\u52a1"))),o.a.createElement(m.a.Item,{key:"3"},o.a.createElement(y.a,{to:"/recommend"},o.a.createElement(h.a,{type:"upload"}),o.a.createElement("span",null,"\u63a8\u8350\u9662\u6821"))))),o.a.createElement(f.a,null,o.a.createElement(Z,{style:{background:"#fff",padding:0}},o.a.createElement(h.a,{className:"trigger",type:this.state.collapsed?"menu-unfold":"menu-fold",onClick:this.toggle})),o.a.createElement(ee,{style:{margin:"24px 16px",padding:24,background:"#fff",minHeight:400}},o.a.createElement(b.a,{exact:!0,path:"/",component:B}),o.a.createElement(b.a,{path:"/assess",component:V}),o.a.createElement(b.a,{path:"/recommend",component:Y})))))}}]),t}(n.Component),ae=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(te,null))}}]),t}(n.Component);a(395),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[174,2,1]]]);
//# sourceMappingURL=main.60229546.chunk.js.map